"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FirestoreException = exports.ApiClientException = exports.PubSubException = exports.RepositoryException = exports.UnauthorizedException = exports.BadMessageException = exports.Exception = void 0;
const ErrorCode_1 = require("./ErrorCode");
class Exception {
    constructor(message, code, statusCode, cause) {
        this.isError = true;
        this.message = message;
        this.code = code;
        this.statusCode = statusCode;
        this.cause = cause || null;
    }
}
exports.Exception = Exception;
class BadMessageException extends Exception {
    constructor(cause, message) {
        super(message, ErrorCode_1.ErrorCode.BAD_MESSAGE, ErrorCode_1.StatusCode.OK, cause);
    }
}
exports.BadMessageException = BadMessageException;
class UnauthorizedException extends Exception {
    constructor(cause, message) {
        super(message, ErrorCode_1.ErrorCode.UNAUTHORIZED, ErrorCode_1.StatusCode.UNAUTHORIZED, cause);
    }
}
exports.UnauthorizedException = UnauthorizedException;
class RepositoryException extends Exception {
    constructor() {
        const message = 'Ocurrió un error al momento de guardar la guía';
        super(message, ErrorCode_1.ErrorCode.REPOSITORY_ERROR, ErrorCode_1.StatusCode.INTERNAL_ERROR);
    }
}
exports.RepositoryException = RepositoryException;
class PubSubException extends Exception {
    constructor(message, cause) {
        super(message, ErrorCode_1.ErrorCode.PUBSUB_ERROR, ErrorCode_1.StatusCode.INTERNAL_ERROR, cause);
    }
}
exports.PubSubException = PubSubException;
class ApiClientException extends Exception {
    constructor(message) {
        super(message, ErrorCode_1.ErrorCode.API_CLIENT, ErrorCode_1.StatusCode.OK);
    }
}
exports.ApiClientException = ApiClientException;
class FirestoreException extends Exception {
    constructor(code, message) {
        const fsError = ErrorCode_1.ErrorCode.REPOSITORY_ERROR;
        switch (code) {
            case 1:
            case '1':
                super(message, fsError, ErrorCode_1.StatusCode.INTERNAL_ERROR, 'Firestore action cancelled');
                break;
            case 2:
            case '2':
                super(message, fsError, ErrorCode_1.StatusCode.INTERNAL_ERROR, 'Firestore unknown error');
                break;
            case 3:
            case '3':
                super(message, fsError, ErrorCode_1.StatusCode.OK, 'Firestore invalid argument');
                break;
            case 4:
            case '4':
                super(message, fsError, ErrorCode_1.StatusCode.INTERNAL_ERROR, 'Firestore deadline exceeded');
                break;
            case 5:
            case '5':
                super(message, fsError, ErrorCode_1.StatusCode.INTERNAL_ERROR, 'Update nonexistent document');
                break;
            case 6:
            case '6':
                super(message, fsError, ErrorCode_1.StatusCode.OK, 'Firestore document already exists');
                break;
            case 7:
            case '7':
                super(message, fsError, ErrorCode_1.StatusCode.INTERNAL_ERROR, 'Firestore permission denied');
                break;
            case 8:
            case '8':
                super(message, fsError, ErrorCode_1.StatusCode.OK, 'Firestore resource exhausted');
                break;
            case 9:
            case '9':
                super(message, fsError, ErrorCode_1.StatusCode.INTERNAL_ERROR, 'Firestore precondition failed');
                break;
            default:
                super(message, fsError, ErrorCode_1.StatusCode.INTERNAL_ERROR, 'Defaulted unkwnown fs error');
                break;
        }
    }
}
exports.FirestoreException = FirestoreException;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhjZXB0aW9ucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kb21haW4vZXhjZXB0aW9ucy9FeGNlcHRpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJDQUFvRDtBQUVwRCxNQUFzQixTQUFTO0lBTzNCLFlBQVksT0FBZSxFQUFFLElBQWUsRUFBRSxVQUFrQixFQUFFLEtBQWM7UUFDNUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLElBQUksSUFBSSxDQUFDO0lBQy9CLENBQUM7Q0FDSjtBQWRELDhCQWNDO0FBRUQsTUFBYSxtQkFBb0IsU0FBUSxTQUFTO0lBQzlDLFlBQVksS0FBYSxFQUFFLE9BQWU7UUFDdEMsS0FBSyxDQUFDLE9BQU8sRUFBRSxxQkFBUyxDQUFDLFdBQVcsRUFBRSxzQkFBVSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNoRSxDQUFDO0NBQ0o7QUFKRCxrREFJQztBQUVELE1BQWEscUJBQXNCLFNBQVEsU0FBUztJQUNoRCxZQUFZLEtBQWEsRUFBRSxPQUFlO1FBQ3RDLEtBQUssQ0FBQyxPQUFPLEVBQUUscUJBQVMsQ0FBQyxZQUFZLEVBQUUsc0JBQVUsQ0FBQyxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDM0UsQ0FBQztDQUNKO0FBSkQsc0RBSUM7QUFFRCxNQUFhLG1CQUFvQixTQUFRLFNBQVM7SUFDOUM7UUFDSSxNQUFNLE9BQU8sR0FBRyxnREFBZ0QsQ0FBQztRQUNqRSxLQUFLLENBQUMsT0FBTyxFQUFFLHFCQUFTLENBQUMsZ0JBQWdCLEVBQUUsc0JBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUMxRSxDQUFDO0NBQ0o7QUFMRCxrREFLQztBQUVELE1BQWEsZUFBZ0IsU0FBUSxTQUFTO0lBQzFDLFlBQVksT0FBZSxFQUFFLEtBQWE7UUFDdEMsS0FBSyxDQUFDLE9BQU8sRUFBRSxxQkFBUyxDQUFDLFlBQVksRUFBRSxzQkFBVSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM3RSxDQUFDO0NBQ0o7QUFKRCwwQ0FJQztBQUVELE1BQWEsa0JBQW1CLFNBQVEsU0FBUztJQUM3QyxZQUFZLE9BQWU7UUFDdkIsS0FBSyxDQUFDLE9BQU8sRUFBRSxxQkFBUyxDQUFDLFVBQVUsRUFBRSxzQkFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3hELENBQUM7Q0FDSjtBQUpELGdEQUlDO0FBRUQsTUFBYSxrQkFBbUIsU0FBUSxTQUFTO0lBQzdDLFlBQVksSUFBaUMsRUFBRSxPQUFlO1FBQzFELE1BQU0sT0FBTyxHQUFHLHFCQUFTLENBQUMsZ0JBQWdCLENBQUM7UUFDM0MsUUFBUSxJQUFJLEVBQUUsQ0FBQztZQUNYLEtBQUssQ0FBQyxDQUFDO1lBQ1AsS0FBSyxHQUFHO2dCQUNKLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLHNCQUFVLENBQUMsY0FBYyxFQUFFLDRCQUE0QixDQUFDLENBQUM7Z0JBQ2pGLE1BQU07WUFDVixLQUFLLENBQUMsQ0FBQztZQUNQLEtBQUssR0FBRztnQkFDSixLQUFLLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxzQkFBVSxDQUFDLGNBQWMsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO2dCQUM5RSxNQUFNO1lBQ1YsS0FBSyxDQUFDLENBQUM7WUFDUCxLQUFLLEdBQUc7Z0JBQ0osS0FBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsc0JBQVUsQ0FBQyxFQUFFLEVBQUUsNEJBQTRCLENBQUMsQ0FBQztnQkFDckUsTUFBTTtZQUNWLEtBQUssQ0FBQyxDQUFDO1lBQ1AsS0FBSyxHQUFHO2dCQUNKLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLHNCQUFVLENBQUMsY0FBYyxFQUFFLDZCQUE2QixDQUFDLENBQUM7Z0JBQ2xGLE1BQU07WUFDVixLQUFLLENBQUMsQ0FBQztZQUNQLEtBQUssR0FBRztnQkFDSixLQUFLLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxzQkFBVSxDQUFDLGNBQWMsRUFBRSw2QkFBNkIsQ0FBQyxDQUFDO2dCQUNsRixNQUFNO1lBQ1YsS0FBSyxDQUFDLENBQUM7WUFDUCxLQUFLLEdBQUc7Z0JBQ0osS0FBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsc0JBQVUsQ0FBQyxFQUFFLEVBQUUsbUNBQW1DLENBQUMsQ0FBQztnQkFDNUUsTUFBTTtZQUNWLEtBQUssQ0FBQyxDQUFDO1lBQ1AsS0FBSyxHQUFHO2dCQUNKLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLHNCQUFVLENBQUMsY0FBYyxFQUFFLDZCQUE2QixDQUFDLENBQUM7Z0JBQ2xGLE1BQU07WUFDVixLQUFLLENBQUMsQ0FBQztZQUNQLEtBQUssR0FBRztnQkFDSixLQUFLLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxzQkFBVSxDQUFDLEVBQUUsRUFBRSw4QkFBOEIsQ0FBQyxDQUFDO2dCQUN2RSxNQUFNO1lBQ1YsS0FBSyxDQUFDLENBQUM7WUFDUCxLQUFLLEdBQUc7Z0JBQ0osS0FBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsc0JBQVUsQ0FBQyxjQUFjLEVBQUUsK0JBQStCLENBQUMsQ0FBQztnQkFDcEYsTUFBTTtZQUNWO2dCQUNJLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLHNCQUFVLENBQUMsY0FBYyxFQUFFLDZCQUE2QixDQUFDLENBQUM7Z0JBQ2xGLE1BQU07UUFDZCxDQUFDO0lBQ0wsQ0FBQztDQUNKO0FBN0NELGdEQTZDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVycm9yQ29kZSwgU3RhdHVzQ29kZSB9IGZyb20gJy4vRXJyb3JDb2RlJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEV4Y2VwdGlvbiB7XG4gICAgaXNFcnJvcjogYm9vbGVhbjtcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgY29kZTogRXJyb3JDb2RlO1xuICAgIHN0YXR1c0NvZGU6IG51bWJlcjtcbiAgICBjYXVzZTogc3RyaW5nIHwgbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29kZTogRXJyb3JDb2RlLCBzdGF0dXNDb2RlOiBudW1iZXIsIGNhdXNlPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuaXNFcnJvciA9IHRydWU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgIHRoaXMuY2F1c2UgPSBjYXVzZSB8fCBudWxsO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJhZE1lc3NhZ2VFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNhdXNlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBFcnJvckNvZGUuQkFEX01FU1NBR0UsIFN0YXR1c0NvZGUuT0ssIGNhdXNlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVbmF1dGhvcml6ZWRFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNhdXNlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBFcnJvckNvZGUuVU5BVVRIT1JJWkVELCBTdGF0dXNDb2RlLlVOQVVUSE9SSVpFRCwgY2F1c2UpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlcG9zaXRvcnlFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ09jdXJyacOzIHVuIGVycm9yIGFsIG1vbWVudG8gZGUgZ3VhcmRhciBsYSBndcOtYSc7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIEVycm9yQ29kZS5SRVBPU0lUT1JZX0VSUk9SLCBTdGF0dXNDb2RlLklOVEVSTkFMX0VSUk9SKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQdWJTdWJFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY2F1c2U6IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBFcnJvckNvZGUuUFVCU1VCX0VSUk9SLCBTdGF0dXNDb2RlLklOVEVSTkFMX0VSUk9SLCBjYXVzZSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXBpQ2xpZW50RXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgRXJyb3JDb2RlLkFQSV9DTElFTlQsIFN0YXR1c0NvZGUuT0spO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZpcmVzdG9yZUV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29kZTogbnVtYmVyIHwgc3RyaW5nIHwgdW5kZWZpbmVkLCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZnNFcnJvciA9IEVycm9yQ29kZS5SRVBPU0lUT1JZX0VSUk9SO1xuICAgICAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhc2UgJzEnOlxuICAgICAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZzRXJyb3IsIFN0YXR1c0NvZGUuSU5URVJOQUxfRVJST1IsICdGaXJlc3RvcmUgYWN0aW9uIGNhbmNlbGxlZCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FzZSAnMic6XG4gICAgICAgICAgICAgICAgc3VwZXIobWVzc2FnZSwgZnNFcnJvciwgU3RhdHVzQ29kZS5JTlRFUk5BTF9FUlJPUiwgJ0ZpcmVzdG9yZSB1bmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYXNlICczJzpcbiAgICAgICAgICAgICAgICBzdXBlcihtZXNzYWdlLCBmc0Vycm9yLCBTdGF0dXNDb2RlLk9LLCAnRmlyZXN0b3JlIGludmFsaWQgYXJndW1lbnQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgJzQnOlxuICAgICAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZzRXJyb3IsIFN0YXR1c0NvZGUuSU5URVJOQUxfRVJST1IsICdGaXJlc3RvcmUgZGVhZGxpbmUgZXhjZWVkZWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIGNhc2UgJzUnOlxuICAgICAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZzRXJyb3IsIFN0YXR1c0NvZGUuSU5URVJOQUxfRVJST1IsICdVcGRhdGUgbm9uZXhpc3RlbnQgZG9jdW1lbnQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIGNhc2UgJzYnOlxuICAgICAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZzRXJyb3IsIFN0YXR1c0NvZGUuT0ssICdGaXJlc3RvcmUgZG9jdW1lbnQgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgIGNhc2UgJzcnOlxuICAgICAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZzRXJyb3IsIFN0YXR1c0NvZGUuSU5URVJOQUxfRVJST1IsICdGaXJlc3RvcmUgcGVybWlzc2lvbiBkZW5pZWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIGNhc2UgJzgnOlxuICAgICAgICAgICAgICAgIHN1cGVyKG1lc3NhZ2UsIGZzRXJyb3IsIFN0YXR1c0NvZGUuT0ssICdGaXJlc3RvcmUgcmVzb3VyY2UgZXhoYXVzdGVkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICBjYXNlICc5JzpcbiAgICAgICAgICAgICAgICBzdXBlcihtZXNzYWdlLCBmc0Vycm9yLCBTdGF0dXNDb2RlLklOVEVSTkFMX0VSUk9SLCAnRmlyZXN0b3JlIHByZWNvbmRpdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgc3VwZXIobWVzc2FnZSwgZnNFcnJvciwgU3RhdHVzQ29kZS5JTlRFUk5BTF9FUlJPUiwgJ0RlZmF1bHRlZCB1bmt3bm93biBmcyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yUmVzcG9uc2Uge1xuICAgIGVycm9yOiBzdHJpbmc7XG4gICAgc3RhdHVzQ29kZTogbnVtYmVyO1xuICAgIGVycm9yQ29kZTogRXJyb3JDb2RlO1xufVxuIl19